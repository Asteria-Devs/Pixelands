<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pixelands Wiki</title>
  <link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: 'Bubblegum Sans', cursive;
      text-align: center;
      margin: 0;
      padding: 40px;
    }

    a {
      color: #fff;
      background-color: #333;
      padding: 12px 24px;
      border-radius: 8px;
      text-decoration: none;
      font-size: 20px;
      display: inline-block;
      margin-top: 30px;
      transition: background-color 0.3s ease;
    }

    a:hover {
      background-color: #555;
    }

    #search {
      padding: 10px;
      font-size: 16px;
      width: 250px;
      margin: 20px 0;
      border-radius: 5px;
      border: none;
    }

    .item {
      font-size: 20px;
      margin: 10px 0;
      position: relative;
    }

    .category-tag {
      padding: 3px 10px;
      background-color: #444;
      border-radius: 5px;
      margin-left: 10px;
    }

    .arrow {
      margin-left: 10px;
      cursor: pointer;
      font-size: 24px;
      vertical-align: middle;
    }

    .dropdown-content {
      display: none;
      background-color: #333;
      padding: 10px;
      border-radius: 8px;
      margin-top: 5px;
      text-align: left;
    }

    .item.active .dropdown-content {
      display: block;
    }

    hr {
      border: 1px solid #555;
      width: 80%;
      margin: 20px auto;
    }

    .filter-section {
      margin-bottom: 20px;
    }

    .filter {
      margin-right: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>Welcome to the Wiki!</h1>
<h2>This is a place to find all of Pixelands items!</h2>

<!-- Search bar -->
<input type="text" id="search" placeholder="Search items...">

<!-- Filter categories -->
<div class="filter-section">
  <label><input type="checkbox" class="filter" value="Block"> Block</label>
  <label><input type="checkbox" class="filter" value="Item"> Item</label>
  <label><input type="checkbox" class="filter" value="Background"> Background</label>
</div>

<div id="itemsContainer"></div>

<a href="index.html">‚Üê Back to Home</a>

<script>
const maxItems = 1500; 
const items = [
  { name: 'Dirt Block', description: 'A basic dirt block.', obtained: 'Found underground.' },
  { name: 'Grass Block', description: 'Covered with grass.', obtained: 'Found ontop of worlds..' },
  { name: 'Sign', description: 'Place to write things for all too see.', obtained: 'Crafted from wood.' },
  { name: 'Cave Background', description: 'Decorative background.', obtained: 'Found behind dirt.' },
  { name: 'Golden Heart Block', description: 'Item from gacha, great for farming!.', obtained: 'Dropped from Valentines gachas.' },
  { name: 'Four Leaf Clover', description: 'Lucky charm used for crafting.', obtained: 'Obtained by breaking blocks.' },
  { name: 'Emerald lock', description: 'Extra gems!.', obtained: 'Obtained through crafting.' },
];

const emptySlots = Array(maxItems - items.length).fill({ name: '', description: '', obtained: '' });

const container = document.getElementById('itemsContainer');

function renderItems() {
  container.innerHTML = '';
  const searchTerm = document.getElementById('search').value.toLowerCase();
  const selectedCategories = Array.from(document.querySelectorAll('.filter:checked')).map(cb => cb.value);

  const allItems = [...items, ...emptySlots];

  allItems.forEach((item, index) => {
    if (item.name === '' && item.description === '' && item.obtained === '') {
      return;
    }

    let category = 'Item';
    if (item.name.toLowerCase().includes('background')) {
      category = 'Background';
    } else if (item.name.toLowerCase().includes('block')) {
      category = 'Block';
    }

    if (
      (item.name.toLowerCase().includes(searchTerm) || searchTerm === '') &&
      (selectedCategories.length === 0 || selectedCategories.includes(category))
    ) {
      const itemDiv = document.createElement('div');
      itemDiv.className = 'item';
      itemDiv.innerHTML = `
        ${item.name}
        <span class="category-tag">${category}</span>
        <span class="arrow" data-index="${index}">+</span>
        <div class="dropdown-content">
          <strong>Description:</strong><br> ${item.description || '(Not yet filled)'}<br><br>
          <strong>How it's obtained:</strong><br> ${item.obtained || '(Not yet filled)'}
        </div>
      `;
      container.appendChild(itemDiv);
      container.appendChild(document.createElement('hr'));
    }
  });

  // Setup dropdown toggles only on arrow clicks
  document.querySelectorAll('.arrow').forEach(arrow => {
    arrow.addEventListener('click', function(e) {
      e.stopPropagation(); // Prevent clicking the whole div
      const itemDiv = this.parentElement;
      const currentlyActive = itemDiv.classList.contains('active');

      document.querySelectorAll('.item').forEach(i => {
        i.classList.remove('active');
        i.querySelector('.arrow').innerText = '+';
      });

      if (!currentlyActive) {
        itemDiv.classList.add('active');
        this.innerText = '-';
      }
    });
  });
}

renderItems();

// Search
document.getElementById('search').addEventListener('input', renderItems);

// Filter
document.querySelectorAll('.filter').forEach(filter => {
  filter.addEventListener('change', renderItems);
});
</script>

</body>
</html>
